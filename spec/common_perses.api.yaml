info:
  title: Peres Dashboard Schemas
  version: "1.0.0"
  description: |
    This spec encapsulates the Perses Dashboard models necessary to embody a Perses Dashboard. 
      
    See the Perses API reference here: https://perses.dev/perses/docs/api/ 
    
    Note:
      - there's no automation to generate theses models. They were generated manually as a once-off exercise, with the expectation that minor tweaks and adjustments would likely need to happen over time.
      - schemas are prefixed with 'Perses' to make it simpler to post process generated code.
components:
  schemas:
    PersesDashboard:
      properties:
        kind:
          $ref: '#/components/schemas/PersesKind'
        metadata:
          $ref: '#/components/schemas/PersesProjectMetadata'
        spec:
          $ref: '#/components/schemas/PersesDashboardSpec'
      type: object
    PersesDashboardSpec:
      properties:
        datasources:
          additionalProperties:
            $ref: '#/components/schemas/PersesDatasourceSpec'
          description: Datasources is an optional list of datasource definition.
          type: object
        display:
          $ref: '#/components/schemas/PersesDisplay'
        duration:
          $ref: '#/components/schemas/PersesDuration'
        layouts:
          items:
            $ref: '#/components/schemas/PersesLayout'
          type: array
        panels:
          additionalProperties:
            $ref: '#/components/schemas/PersesPanel'
          type: object
        refreshInterval:
          $ref: '#/components/schemas/PersesDuration'
        variables:
          items:
            $ref: '#/components/schemas/PersesVariable'
          type: array
      type: object
    PersesDatasourceSpec:
      properties:
        default:
          type: boolean
        display:
          $ref: '#/components/schemas/PersesDisplay'
        plugin:
          $ref: '#/components/schemas/PersesPlugin'
      type: object
    PersesDisplay:
      properties:
        description:
          type: string
        name:
          type: string
      type: object
    PersesDuration:
      description: |-
        A Duration represents the elapsed time between two instants
        as an int64 nanosecond count. The representation limits the
        largest representable duration to approximately 290 years.
      format: int64
      type: integer
    PersesKind:
      type: string
    PersesLayoutKind:
      type: string
      enum:
        - Grid
      description: "Defines the layout type. Currently, only 'Grid' is supported."
    PersesJSONRef:
      type: object
      properties:
        $ref:
          type: string
          description: "The JSON reference pointing to the actual object."
        path:
          type: array
          items:
            type: string
          description: "A list of strings used to navigate to the referenced object."
        object:
          type: object
          description: "The actual referenced object (not included in the OpenAPI spec, but used internally)."
      required:
        - $ref
    PersesGridLayoutCollapse:
      type: object
      properties:
        open:
          type: boolean
          description: "Indicates whether the grid layout is collapsed."
      required:
        - open
    PersesGridLayoutDisplay:
      type: object
      properties:
        title:
          type: string
          description: "The title of the grid layout."
        collapse:
          $ref: '#/components/schemas/PersesGridLayoutCollapse'
      required:
        - title
    PersesGridItem:
      type: object
      properties:
        x:
          type: integer
          description: "The x-coordinate of the item in the grid."
        y:
          type: integer
          description: "The y-coordinate of the item in the grid."
        width:
          type: integer
          description: "The width of the item in the grid."
        height:
          type: integer
          description: "The height of the item in the grid."
        content:
          $ref: '#/components/schemas/PersesJSONRef'
      required:
        - x
        - y
        - width
        - height
        - content
    PersesLayoutSpec:
      type: object
      properties:
        display:
          $ref: '#/components/schemas/PersesGridLayoutDisplay'
        items:
          type: array
          items:
            $ref: '#/components/schemas/PersesGridItem'
      required:
        - items
    PersesLayout:
      type: object
      properties:
        kind:
          $ref: '#/components/schemas/PersesLayoutKind'
        spec:
          $ref: '#/components/schemas/PersesLayoutSpec'
      required:
        - kind
        - spec
    PersesLink:
      properties:
        name:
          type: string
        renderVariables:
          type: boolean
        targetBlank:
          type: boolean
        tooltip:
          type: string
        url:
          type: string
      type: object
    PersesMetadata:
      properties:
        createdAt:
          format: date-time
          type: string
        name:
          type: string
        updatedAt:
          format: date-time
          type: string
        version:
          format: uint64
          type: integer
      type: object
    PersesPanel:
      properties:
        kind:
          type: string
        spec:
          $ref: '#/components/schemas/PersesPanelSpec'
      type: object
    PersesPanelDisplay:
      properties:
        description:
          type: string
        name:
          type: string
      type: object
    PersesPanelSpec:
      properties:
        display:
          $ref: '#/components/schemas/PersesPanelDisplay'
        links:
          items:
            $ref: '#/components/schemas/PersesLink'
          type: array
        plugin:
          $ref: '#/components/schemas/PersesPlugin'
        queries:
          items:
            $ref: '#/components/schemas/PersesQuery'
          type: array
      type: object
    PersesPlugin:
      properties:
        kind:
          type: string
        spec:
          type: object
      type: object
    PersesProjectMetadata:
      properties:
        createdAt:
          format: date-time
          type: string
        name:
          type: string
        project:
          type: string
        updatedAt:
          format: date-time
          type: string
        version:
          format: uint64
          type: integer
      title: ProjectMetadata is the metadata struct for resources that belongs to a project.
      type: object
    PersesProjectMetadataWrapper:
      description: |-
        This wrapping struct is required to allow defining a custom unmarshall on Metadata
        without breaking the Project attribute (the fact Metadata is injected line in
        ProjectMetadata caused Project string to be ignored when unmarshalling)
      properties:
        project:
          type: string
      type: object
    PersesQuery:
      properties:
        kind:
          type: string
        spec:
          $ref: '#/components/schemas/PersesQuerySpec'
      type: object
    PersesQuerySpec:
      properties:
        plugin:
          $ref: '#/components/schemas/PersesPlugin'
      type: object
    PersesVariable:
      properties:
        kind:
          $ref: '#/components/schemas/PersesKind'
        spec:
          $ref: '#/components/schemas/PersesvariableSpec'
      type: object
    PersesvariableSpec:
      properties:
        GetName:
          description: GetName returns the name of the variable. It will be used to reference the variable in others
          type: string
      type: object
